(()=>{var e={};e.id=888,e.ids=[888],e.modules={1219:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var a,o,s,i,n,c,u,A=r(997),l=r(6689),E=r(2885);let O=process.env.NEXT_PUBLIC_SUPABASE_URL||"",d=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"";O&&d||console.error("Missing Supabase environment variables. Please check your .env file.");let S=(0,E.createClient)(O,d),I=0,T=new Map,R=e=>{if(T.has(e))return;let t=setTimeout(()=>{T.delete(e),N({type:"REMOVE_TOAST",toastId:e})},1e6);T.set(e,t)},C=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?R(r):e.toasts.forEach(e=>{R(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},_=[],p={toasts:[]};function N(e){p=C(p,e),_.forEach(e=>{e(p)})}function D({...e}){let t=(I=(I+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>N({type:"DISMISS_TOAST",toastId:t});return N({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>N({type:"UPDATE_TOAST",toast:{...e,id:t}})}}(function(e){e.PRIMEIRA_INSTANCIA="tribunal_primeira_instancia",e.RELACAO="tribunal_relacao",e.SUPREMO="supremo_tribunal_justica",e.CONSTITUCIONAL="tribunal_constitucional",e.ADMINISTRATIVO="tribunal_administrativo",e.FISCAL="tribunal_fiscal",e.JULGADO_PAZ="julgado_paz",e.TRABALHO="tribunal_trabalho",e.MARITIMO="tribunal_maritimo",e.PROPRIEDADE_INTELECTUAL="tribunal_propriedade_intelectual",e.CONCORRENCIA="tribunal_concorrencia",e.EXECUCAO_PENAS="tribunal_execucao_penas",e.CONSERVATORIA="conservatoria",e.NOTARIO="notario",e.OTHER="other"})(a||(a={})),function(e){e.ACAO_CIVIL="acao_civil",e.PROCESSO_PENAL="processo_penal",e.PROCESSO_TRABALHO="processo_trabalho",e.PROCESSO_ADMINISTRATIVO="processo_administrativo",e.PROCESSO_FISCAL="processo_fiscal",e.PROCESSO_FAMILIA="processo_familia",e.INVENTARIO="inventario",e.EXECUCAO="execucao",e.PROVIDENCIA_CAUTELAR="providencia_cautelar",e.RECURSO="recurso",e.INSOLVENCIA="insolvencia",e.MEDIACAO="mediacao",e.ARBITRAGEM="arbitragem",e.OTHER="other"}(o||(o={})),function(e){e.ADMINISTRADOR="administrador",e.ADVOGADO_SENIOR="advogado_senior",e.ADVOGADO="advogado",e.ASSISTENTE="assistente",e.CLIENTE="cliente"}(s||(s={})),function(e){e.PENDENTE="pendente",e.EM_ANDAMENTO="em_andamento",e.CONCLUIDA="concluida",e.BLOQUEADA="bloqueada",e.CANCELADA="cancelada"}(i||(i={})),function(e){e.BAIXA="baixa",e.MEDIA="media",e.ALTA="alta",e.URGENTE="urgente"}(n||(n={})),function(e){e.ATIVO="ativo",e.SUSPENSO="suspenso",e.ARQUIVADO="arquivado",e.ENCERRADO="encerrado",e.RECURSO="recurso",e.AGUARDANDO_DECISAO="aguardando_decisao"}(c||(c={})),function(e){e.PETICAO_INICIAL="peticao_inicial",e.CONTESTACAO="contestacao",e.RECURSO="recurso",e.ALEGACOES="alegacoes",e.PROCURACAO="procuracao",e.NOTIFICACAO="notificacao",e.SENTENCA="sentenca",e.ACORDAO="acordao",e.CONTRATO="contrato",e.ESCRITURA="escritura",e.CERTIDAO="certidao",e.DESPACHO="despacho",e.PARECER="parecer",e.RECLAMACAO="reclamacao",e.REQUERIMENTO="requerimento",e.RELATORIO="relatorio",e.OUTRO="outro"}(u||(u={}));let f=(0,l.createContext)(void 0),h=({children:e})=>{let[t,r]=(0,l.useState)(null),[a,o]=(0,l.useState)(null),[i,n]=(0,l.useState)(!0),[c,u]=(0,l.useState)(null),E=async e=>{try{let{data:t,error:r}=await S.from("profiles").select("role").eq("id",e).single();if(r)throw r;t&&u(t.role)}catch(e){console.error("Failed to fetch user role:",e),u(null)}},O=async()=>{n(!0);try{let{data:{session:e},error:t}=await S.auth.getSession();if(t)throw t;o(e),r(e?.user||null),e?.user?await E(e.user.id):u(null)}catch(e){console.error("Failed to refresh session:",e)}finally{n(!1)}};(0,l.useEffect)(()=>{O();let{data:{subscription:e}}=S.auth.onAuthStateChange(async(e,t)=>{switch(o(t),r(t?.user||null),t?.user?await E(t.user.id):u(null),e){case"SIGNED_IN":D({title:"Bem-vindo",description:"Sess\xe3o iniciada com sucesso"});break;case"SIGNED_OUT":D({title:"Sess\xe3o terminada",description:"At\xe9 logo!"});break;case"TOKEN_REFRESHED":console.log("Token refreshed")}});return()=>e.unsubscribe()},[]);let d=async(e,t)=>{try{let{error:r}=await S.auth.signInWithPassword({email:e,password:t});return r&&D({title:"Erro",description:r.message,variant:"destructive"}),{error:r?Error(r.message):null}}catch(e){return console.error("Login error:",e),{error:e instanceof Error?e:Error("Unknown error")}}},I=async(e,t,{nome:r,apelido:a,role:o=s.CLIENTE})=>{try{let{error:s}=await S.auth.signUp({email:e,password:t,options:{data:{nome:r,apelido:a,role:o}}});if(s)throw s;return D({title:"Sucesso",description:"Verifique seu email para confirmar o registro"}),{error:null}}catch(e){return console.error("Registration error:",e),{error:e instanceof Error?e:Error("Registration failed")}}},T=async()=>{try{await S.auth.signOut(),D({title:"Desconectado",description:"Sess\xe3o encerrada"})}catch(e){console.error("Logout error:",e),D({title:"Erro",description:"Falha ao sair",variant:"destructive"})}};return A.jsx(f.Provider,{value:{user:t,session:a,isLoading:i,userRole:c,signIn:d,signUp:I,signOut:T,refreshSession:O},children:e})};function m({Component:e,pageProps:t}){return A.jsx(h,{children:A.jsx(e,{...t})})}r(108)},108:()=>{},2885:e=>{"use strict";e.exports=require("@supabase/supabase-js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")}};var t=require("../webpack-runtime.js");t.C(e);var r=t(t.s=1219);module.exports=r})();